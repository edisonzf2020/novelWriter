# 核心架构原则 (源自 /docs/technical)

经过对作者技术文档的详细研读，我们确认了以下必须遵守的核心设计原则：

* **分层架构**: 系统严格遵循 `core` (非 UI 逻辑), `gui` (UI 组件), 和 `formats` (文件格式处理) 之间的分离。**新的 `ai` 包必须作为另一个核心层，不得直接依赖于 `gui`**。
* **信号/槽机制**: PyQt6 的信号和槽是组件间通信的首选机制。新的 AI Copilot UI 必须通过这种方式与主应用交互，以保持松耦合。
* **配置解耦**: `novelwriter.core.config.Config` 是配置的唯一来源。新的 AI 配置 (`AIConfig`) 必须以最小侵入的方式与之集成，如规划文档中所述，通过懒加载属性进行对接。
* **可选依赖**: 系统设计支持通过 `extras_require` (在 `setup.cfg` 中定义) 实现可选功能。AI 助手的功能必须作为一个或多个可选依赖组提供，确保在未安装相关库时，主程序能正常运行。
