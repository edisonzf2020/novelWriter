# 4. 技术栈分析

## 4.1 现有技术栈（基于Context7 MCP协议调研）

| 类别 | 当前技术 | 版本 | 在增强中的使用 | 备注 |
|------|----------|------|----------------|------|
| **核心语言** | Python | 3.10+ | 完全复用 | 完美支持MCP Python SDK |
| **GUI框架** | PyQt6 | 6.4+ | UI扩展 | 现有主题和国际化系统 |
| **数据存储** | XML + JSON | 内置 | 完全复用 | 项目文件和元数据存储 |
| **AI Provider** | OpenAI SDK | 最新 | 完全复用 | 现有provider架构成熟 |
| **HTTP客户端** | httpx | 现有 | **MCP传输复用** | 支持streamable-http传输 |
| **异步处理** | asyncio + QThread | 现有 | **MCP要求** | 完美匹配MCP异步架构 |

## 4.2 新技术添加（基于MCP官方要求）

| 技术 | 版本 | 目的 | 理由 | 集成方式 |
|------|------|------|------|----------|
| **MCP Python SDK** | 最新 | MCP协议实现 | 官方SDK，支持多传输协议 | 可选依赖，核心功能 |
| **FastMCP** | 内置于SDK | 高级MCP服务器 | 简化服务器创建，内置功能丰富 | 主要服务器框架 |
| **Pydantic v2** | v2+ | 结构化输出 | MCP工具Schema验证标准 | 工具参数和响应验证 |

## 4.3 MCP协议支持的传输方式

**传输协议选择**：
```python